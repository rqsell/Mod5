{"ast":null,"code":"import _regeneratorRuntime from\"/Users/secondary/Desktop/ironhack/Mod5/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/secondary/Desktop/ironhack/Mod5/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import baseURL from'./config.js';import{NotificationContainer,NotificationManager}from'react-notifications';console.log(baseURL);var token=window.localStorage.getItem('token');var t=token?token.substring(0,15):null;console.log('TOKEN',t,'NODE_ENV',process.env.NODE_ENV);var resetHead=function resetHead(){return{headers:{Authorization:\"Bearer \".concat(window.localStorage.getItem('token'))}};};var API=axios.create({withCredentials:true,baseURL:baseURL,headers:{Authorization:\"Bearer \".concat(token)}});var actions={getUser:function(){var _getUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return API.get(\"/user\",resetHead());case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));function getUser(){return _getUser.apply(this,arguments);}return getUser;}(),signUp:function(){var _signUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(user){var _res$data;var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.post('/signup',user,resetHead());case 2:res=_context2.sent;window.localStorage.setItem('token',res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.token);return _context2.abrupt(\"return\",res);case 5:case\"end\":return _context2.stop();}}},_callee2);}));function signUp(_x){return _signUp.apply(this,arguments);}return signUp;}(),logIn:function(){var _logIn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(user){var _res$data2;var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return API.post('/login',user,resetHead());case 2:res=_context3.sent;window.localStorage.setItem('token',res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.token);return _context3.abrupt(\"return\",res);case 5:case\"end\":return _context3.stop();}}},_callee3);}));function logIn(_x2){return _logIn.apply(this,arguments);}return logIn;}(),logOut:function(){var _logOut=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:window.localStorage.removeItem('token');_context4.next=3;return API.get('/logout',resetHead());case 3:return _context4.abrupt(\"return\",_context4.sent);case 4:case\"end\":return _context4.stop();}}},_callee4);}));function logOut(){return _logOut.apply(this,arguments);}return logOut;}(),addalist:function(){var _addalist=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return API.post(\"/AddAList\",data,resetHead());case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee5);}));function addalist(_x3){return _addalist.apply(this,arguments);}return addalist;}(),getList:function(){var _getList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(goal){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return API.get(\"/GetList\",resetHead());case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}},_callee6);}));function getList(_x4){return _getList.apply(this,arguments);}return getList;}(),getListDetails:function(){var _getListDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(listid){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return API.get(\"/GetList/\".concat(listid),resetHead());case 2:return _context7.abrupt(\"return\",_context7.sent);case 3:case\"end\":return _context7.stop();}}},_callee7);}));function getListDetails(_x5){return _getListDetails.apply(this,arguments);}return getListDetails;}()};API.interceptors.response.use(function(response){return response;},function(error){var _error$response,_error$response2,_error$response3;console.error(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);if((error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data.name)!==\"JsonWebTokenError\")NotificationManager.error(String(error===null||error===void 0?void 0:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data.message));else NotificationManager.error(\"Please signup or login\");});export default actions;","map":{"version":3,"sources":["/Users/secondary/Desktop/ironhack/Mod5/frontend/src/api/index.js"],"names":["axios","baseURL","NotificationContainer","NotificationManager","console","log","token","window","localStorage","getItem","t","substring","process","env","NODE_ENV","resetHead","headers","Authorization","API","create","withCredentials","actions","getUser","get","signUp","user","post","res","setItem","data","logIn","logOut","removeItem","addalist","getList","goal","getListDetails","listid","interceptors","response","use","error","name","String","message"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport baseURL from './config.js'\nimport {NotificationContainer, NotificationManager} from 'react-notifications';\n\n\nconsole.log(baseURL)\n\nconst token = window.localStorage.getItem('token')\nlet t = token ? token.substring(0,15):null\n\nconsole.log('TOKEN',t, 'NODE_ENV',process.env.NODE_ENV)\n\n\nlet resetHead = () =>  {  \n  return { headers: { Authorization: `Bearer ${window.localStorage.getItem('token')}` } }\n}\n\nconst API = axios.create({ withCredentials: true, baseURL ,  headers: { Authorization: `Bearer ${token}`} } );\n\n\nconst actions = {\n  getUser: async () => {\n    return await API.get(`/user`, resetHead())\n  },\n  signUp: async (user) => {\n    let res = await API.post('/signup', user, resetHead())\n    window.localStorage.setItem('token', res?.data?.token)\n    return res\n  },\n  logIn: async (user) => {\n    let res = await API.post('/login', user, resetHead())\n    window.localStorage.setItem('token', res?.data?.token)\n    return res\n  },\n  logOut: async () => {\n    window.localStorage.removeItem('token')\n    return await API.get('/logout', resetHead())\n  },\n  addalist: async (data) => {\n    return await API.post(\"/AddAList\", data, resetHead());\n  },\n  getList: async (goal) => {\n    return await API.get(\"/GetList\", resetHead());\n  },\n  getListDetails: async (listid) => {\n    return await API.get(`/GetList/${listid}`, resetHead());\n  },\n};\n\nAPI.interceptors.response.use((response) => response, (error) => { \n  console.error(error?.response?.data)\n  if(error?.response?.data.name !== \"JsonWebTokenError\" )\n    NotificationManager.error(String(error?.response?.data.message))\n  else\n    NotificationManager.error(\"Please signup or login\")\n\n})\n\nexport default actions;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import axios from 'axios';\nimport baseURL from './config.js';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nconsole.log(baseURL);\nconst token = window.localStorage.getItem('token');\nlet t = token ? token.substring(0, 15) : null;\nconsole.log('TOKEN', t, 'NODE_ENV', process.env.NODE_ENV);\n\nlet resetHead = () => {\n  return {\n    headers: {\n      Authorization: `Bearer ${window.localStorage.getItem('token')}`\n    }\n  };\n};\n\nconst API = axios.create({\n  withCredentials: true,\n  baseURL,\n  headers: {\n    Authorization: `Bearer ${token}`\n  }\n});\nconst actions = {\n  getUser: async () => {\n    return await API.get(`/user`, resetHead());\n  },\n  signUp: async user => {\n    var _res$data;\n\n    let res = await API.post('/signup', user, resetHead());\n    window.localStorage.setItem('token', res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.token);\n    return res;\n  },\n  logIn: async user => {\n    var _res$data2;\n\n    let res = await API.post('/login', user, resetHead());\n    window.localStorage.setItem('token', res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.token);\n    return res;\n  },\n  logOut: async () => {\n    window.localStorage.removeItem('token');\n    return await API.get('/logout', resetHead());\n  },\n  addalist: async data => {\n    return await API.post(\"/AddAList\", data, resetHead());\n  },\n  additem: async data => {\n    return await API.post(\"/AddItem\", data, resetHead());\n  },\n  editanitem: async data => {\n    return await API.post(\"/EditAnItem\", data, resetHead());\n  },\n  getItem: async data => {\n    return await API.post(\"/getAllItems\", data, resetHead());\n  },\n  getList: async goal => {\n    return await API.get(\"/GetList\", resetHead());\n  },\n  getListDetails: async listid => {\n    return await API.get(`/GetList/${listid}`, resetHead());\n  },\n  DeleteItem: async data => {\n    return await API.get(`/DeleteAnItem`, resetHead());\n  }\n};\nAPI.interceptors.response.use(response => response, error => {\n  var _error$response, _error$response2, _error$response3;\n\n  console.error(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  if ((error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data.name) !== \"JsonWebTokenError\") NotificationManager.error(String(error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data.message));else NotificationManager.error(\"Please signup or login\");\n});\nexport default actions;","map":{"version":3,"sources":["/Users/secondary/Desktop/ironhack/Mod5/frontend/src/api/index.js"],"names":["axios","baseURL","NotificationContainer","NotificationManager","console","log","token","window","localStorage","getItem","t","substring","process","env","NODE_ENV","resetHead","headers","Authorization","API","create","withCredentials","actions","getUser","get","signUp","user","res","post","setItem","data","logIn","logOut","removeItem","addalist","additem","editanitem","getList","goal","getListDetails","listid","DeleteItem","interceptors","response","use","error","name","String","message"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport baseURL from './config.js'\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\n\n\nconsole.log(baseURL)\n\nconst token = window.localStorage.getItem('token')\nlet t = token ? token.substring(0, 15) : null\n\nconsole.log('TOKEN', t, 'NODE_ENV', process.env.NODE_ENV)\n\n\nlet resetHead = () => {\n  return { headers: { Authorization: `Bearer ${window.localStorage.getItem('token')}` } }\n}\n\nconst API = axios.create({ withCredentials: true, baseURL, headers: { Authorization: `Bearer ${token}` } });\n\n\nconst actions = {\n  getUser: async () => {\n    return await API.get(`/user`, resetHead())\n  },\n  signUp: async (user) => {\n    let res = await API.post('/signup', user, resetHead())\n    window.localStorage.setItem('token', res?.data?.token)\n    return res\n  },\n  logIn: async (user) => {\n    let res = await API.post('/login', user, resetHead())\n    window.localStorage.setItem('token', res?.data?.token)\n    return res\n  },\n  logOut: async () => {\n    window.localStorage.removeItem('token')\n    return await API.get('/logout', resetHead())\n  },\n  addalist: async (data) => {\n    return await API.post(\"/AddAList\", data, resetHead());\n  },\n  additem: async (data) => {\n    return await API.post(\"/AddItem\", data, resetHead());\n  },\n  editanitem: async (data) => {\n    return await API.post(\"/EditAnItem\", data, resetHead());\n  },\n  getItem: async (data) => {\n    return await API.post(\"/getAllItems\", data, resetHead());\n  },\n\n  getList: async (goal) => {\n    return await API.get(\"/GetList\", resetHead());\n  },\n  getListDetails: async (listid) => {\n    return await API.get(`/GetList/${listid}`, resetHead());\n  },\n\n  DeleteItem: async (data) => {\n    return await API.get(`/DeleteAnItem`, resetHead())\n  }\n\n};\n\nAPI.interceptors.response.use((response) => response, (error) => {\n  console.error(error?.response?.data)\n  if (error?.response?.data.name !== \"JsonWebTokenError\")\n    NotificationManager.error(String(error?.response?.data.message))\n  else\n    NotificationManager.error(\"Please signup or login\")\n\n})\n\nexport default actions;\n"]},"metadata":{},"sourceType":"module"}